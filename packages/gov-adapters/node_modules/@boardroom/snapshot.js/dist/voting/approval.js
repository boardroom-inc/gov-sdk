!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).snapshot=t()}(this,(function(){"use strict";return function(){function e(e,t,n,o){this.proposal=e,this.votes=t,this.strategies=n,this.selected=o}return e.isValidChoice=function(e,t){return Array.isArray(e)&&e.every((function(e){return void 0!==(null==t?void 0:t[e-1])}))&&e.length===new Set(e).size},e.prototype.getValidVotes=function(){var t=this;return this.votes.filter((function(n){return e.isValidChoice(n.choice,t.proposal.choices)}))},e.prototype.getScores=function(){var e=this;return this.proposal.choices.map((function(t,n){return e.getValidVotes().filter((function(e){return e.choice.includes(n+1)})).reduce((function(e,t){return e+t.balance}),0)}))},e.prototype.getScoresByStrategy=function(){var e=this;return this.proposal.choices.map((function(t,n){return e.strategies.map((function(t,o){return e.getValidVotes().filter((function(e){return e.choice.includes(n+1)})).reduce((function(e,t){return e+t.scores[o]}),0)}))}))},e.prototype.getScoresTotal=function(){return this.votes.reduce((function(e,t){return e+t.balance}),0)},e.prototype.getChoiceString=function(){var e=this;return this.selected?this.proposal.choices.filter((function(t,n){return e.selected.includes(n+1)})).join(", "):""},e}()}));
